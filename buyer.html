<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
<title>Buyer</title>
<meta content="#000000" name="theme-color"/>
<meta content="yes" name="mobile-web-app-capable"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<link href="manifest.json" rel="manifest"/>
<link href="assets/icon-192.png" rel="apple-touch-icon"/>
<link href="assets/icon-512.png" rel="icon"/>
<script>
const allProducts = [{"name": "Arzu 1l", "price": 500}, {"name": "BUZZ", "price": 650}, {"name": "COLA 1L", "price": 900}, {"name": "Coca-cola 0.5", "price": 550}, {"name": "FANTA", "price": 550}, {"name": "FANTA 1L", "price": 900}, {"name": "FUSE TEA 1L", "price": 900}, {"name": "Fuse tea 0.5", "price": 550}, {"name": "GS –ª–∏–º–æ–Ω–∞–¥ + —Ç–∞—Ä—Ö—É–Ω", "price": 650}, {"name": "KINDER/M&M/KITKAT", "price": 700}, {"name": "Piko 0.5", "price": 650}, {"name": "Qazaq-Food –ö–∞–∑—ã", "price": 0}, {"name": "Qazaq-Food –ö–æ–ª–±–∞—Å–∞", "price": 0}, {"name": "SPRITE 1L", "price": 900}, {"name": "Vitamin C", "price": 400}, {"name": "arzu 0.5", "price": 300}, {"name": "Bonaqua 1l", "price": 500}, {"name": "Cola Zero 0.450", "price": 550}, {"name": "Dizzy", "price": 550}, {"name": "Gorilla", "price": 750}, {"name": "pepsi", "price": 550}, {"name": "Redbull", "price": 1000}, {"name": "sprite 05", "price": 550}, {"name": "Albeni", "price": 500}, {"name": "–ë—É—Ä–≥–µ—Ä –ö–∞–º–¥–∏ Black, –•–æ—Ç-–î–æ–≥", "price": 1500}, {"name": "–ë—É—Ä–≥–µ—Ä –®–æ–∫—É–ø–∞–Ω, –°—ç–Ω–¥–≤–∏—á", "price": 1300}, {"name": "–ë—É—Ä–≥–µ—Ä –ë–ê–û, Puff", "price": 1400}, {"name": "–ì—Ä–∞–Ω–∞—Ç –ü–õ–ê–°–¢", "price": 400}, {"name": "–ï–î–ê Only Staff", "price": 900}, {"name": "–ï–ï –ë–ê–ù–ê–ù", "price": 650}, {"name": "–ö–ª–∞–±-–°—ç–Ω–¥–≤–∏—á", "price": 1400}, {"name": "–ú–æ—Ö–∏—Ç–æ", "price": 550}, {"name": "–ü–∞–Ω–∏–Ω–∏", "price": 1500}, {"name": "–ü–∏—Ü—Ü–∞ TOYASYN", "price": 1200}, {"name": "–°–Ω–∏–∫–µ—Ä—Å/–¢–≤–∏–∫—Å", "price": 600}, {"name": "–§—Ä–µ–Ω—á-–¥–æ–≥ —Ä–∏–∑—ã–∫", "price": 1000}, {"name": "–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI", "price": 650}];
const categoryMap = {"–Ω–∞–ø–∏—Ç–∫–∏": ["Arzu 1l", "BUZZ", "COLA 1L", "Coca-cola 0.5", "FANTA", "FANTA 1L", "FUSE TEA 1L", "Fuse tea 0.5", "GS –ª–∏–º–æ–Ω–∞–¥ + —Ç–∞—Ä—Ö—É–Ω", "Piko 0.5", "SPRITE 1L", "Vitamin C", "arzu 0.5", "Bonaqua 1l", "Cola Zero 0.450", "Dizzy", "Gorilla", "pepsi", "Redbull", "sprite 05", "–ì—Ä–∞–Ω–∞—Ç –ü–õ–ê–°–¢", "–ï–ï –ë–ê–ù–ê–ù", "–ú–æ—Ö–∏—Ç–æ"], "–µ–¥–∞": ["Qazaq-Food –ö–∞–∑—ã", "Qazaq-Food –ö–æ–ª–±–∞—Å–∞", "–ë—É—Ä–≥–µ—Ä –ö–∞–º–¥–∏ Black, –•–æ—Ç-–î–æ–≥", "–ë—É—Ä–≥–µ—Ä –®–æ–∫—É–ø–∞–Ω, –°—ç–Ω–¥–≤–∏—á", "–ë—É—Ä–≥–µ—Ä –ë–ê–û, Puff", "–ï–î–ê Only Staff", "–ö–ª–∞–±-–°—ç–Ω–¥–≤–∏—á", "–ü–∞–Ω–∏–Ω–∏", "–ü–∏—Ü—Ü–∞ TOYASYN", "–§—Ä–µ–Ω—á-–¥–æ–≥ —Ä–∏–∑—ã–∫", "–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI"], "—à–æ–∫–æ–ª–∞–¥–∫–∏": ["KINDER/M&M/KITKAT", "Albeni", "–°–Ω–∏–∫–µ—Ä—Å/–¢–≤–∏–∫—Å"]};
</script><script>navigator.serviceWorker?.register("service-worker.js")</script>
<style>
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: #000; color: #fff; font-family: sans-serif;
      touch-action: manipulation;
    }
    .auth-screen {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    input {
      padding: 6px 10px; font-size: 16px;
      border-radius: 8px; border: none;
      width: 80vw; max-width: 300px;
    }
    button {
      font-size: 16px; padding: 8px; min-width: 40px; height: 40px; border-radius: 8px;
    }
    .main { padding: 10px; height: 100%; box-sizing: border-box; display: flex; flex-direction: column; }
    .products { flex: 1; overflow-y: auto; padding-bottom: 10px; }
    .product {
      background: #111; margin-bottom: 6px; padding: 10px; border-radius: 8px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .cart { background: #111; padding: 10px; margin-top: 10px; max-height: 40vh; overflow-y: auto; }
  </style>
</head>
<body>
<audio id="ping" preload="auto" src="assets/ping.mp3"></audio>
<div class="auth-screen" id="authScreen" style="display:none">
<input autocomplete="username" id="loginName" name="username" placeholder="–ò–º—è" type="text"/>
<input autocomplete="current-password" id="loginPass" name="password" placeholder="–ü–∞—Ä–æ–ª—å" type="password"/>
<label style="color:white;font-size:14px"><input id="rememberMe" type="checkbox"/> –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
<button onclick="login()">–í–æ–π—Ç–∏</button>
</div>
<div class="main" id="mainScreen" style="display:none;">
<h2>–ü—Ä–∏–≤–µ—Ç, <span id="username"></span>!</h2>
<input id="search" oninput="filterProducts()" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º..."/>
<div id="categoryTabs" style="display:flex; gap:5px; justify-content:center; margin-bottom:10px; flex-wrap:wrap;"><button onclick="setCategory('–≤—Å–µ')">–í—Å–µ</button><button onclick="setCategory('–Ω–∞–ø–∏—Ç–∫–∏')">–ù–∞–ø–∏—Ç–∫–∏</button><button onclick="setCategory('–µ–¥–∞')">–ï–¥–∞</button><button onclick="setCategory('—à–æ–∫–æ–ª–∞–¥–∫–∏')">–®–æ–∫–æ–ª–∞–¥–∫–∏</button></div><div class="products" id="productList"></div>
<div class="cart" id="cart">
<h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
<ul id="cartItems"></ul>
<p>–ò—Ç–æ–≥–æ: <span id="totalPrice">0</span> ‚Ç∏</p>
<button onclick="sendOrder()">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>
</div>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="firebase-config.js"></script>
<script>
const imageMap = {"Arzu 1l": "assets/images/Arzu 1l.jpg", "COLA 1L": "assets/images/COLA 1L.jpg", "Coca-cola 0.5": "assets/images/Coca-cola 0.5.jpg", "FANTA": "assets/images/FANTA.png", "FANTA 1L": "assets/images/FANTA 1L.png", "FUSE TEA 1L": "assets/images/FUSE TEA 1L.png", "Fuse tea 0.5": "assets/images/Fuse tea 0.5.png", "Piko 0.5": "assets/images/Piko 0.5.png", "SPRITE 1L": "assets/images/SPRITE 1L.jpg", "Vitamin C": "assets/images/Vitamin C.jpg", "arzu 0.5": "assets/images/arzu 0.5.jpg", "Bonaqua 1l": "assets/images/Bonaqua 1l.png", "Cola Zero 0.450": "assets/images/Cola Zero 0.450.png", "Dizzy": "assets/images/Dizzy.png", "Gorilla": "assets/images/Gorilla.png", "pepsi": "assets/images/pepsi.png", "Redbull": "assets/images/Redbull.png", "sprite 05": "assets/images/sprite 05.jpg", "Albeni": "assets/images/Albeni.png"};
function renderProducts(list) {
  const container = document.getElementById("productList");
  container.innerHTML = "";
  list.forEach(p => {
    const el = document.createElement("div");
    el.className = "product";
    const imgPath = imageMap[p.name] || "assets/images/default.png";
    el.innerHTML = `
      <button onclick='changeQty(${JSON.stringify(p)}, -1)' style='margin-right:10px;'>‚ûñ</button>
      <div>
        <img src="${imgPath}" alt="${p.name}" style="width:80px;height:80px;object-fit:contain;background:white;border-radius:10px;"><br>
        <b>${p.name}</b><br>${p.price} ‚Ç∏
      </div>
      <button onclick='changeQty(${JSON.stringify(p)}, 1)' style='margin-left:10px;'>‚ûï</button>
    `;
    container.appendChild(el);
  });
}
</script></body>
</html>