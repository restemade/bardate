<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ë–∞—Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <style>
    body { background: black; color: white; font-family: sans-serif; padding: 10px; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; }
    .hidden { display: none; }
    .tabs button { margin: 5px; padding: 5px 10px; }
    .product { background: #222; margin: 5px; padding: 10px; border-radius: 8px; }
    .cart { margin-top: 20px; background: #111; padding: 10px; border-radius: 10px; }
    .qty-btns button { width: 30px; height: 30px; margin: 0 5px; }
  </style>
</head>
<body>
  <div id="auth">
    <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
    <input id="login" placeholder="–ò–º—è">
    <input id="pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="auth()">–í–æ–π—Ç–∏</button>
  </div>

  <div id="app" class="hidden">
    <h2>–í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤</h2>
    <div class="tabs">
      <button onclick="setCategory('–≤—Å–µ')">–í—Å–µ</button>
      <button onclick="setCategory('–Ω–∞–ø–∏—Ç–∫–∏')">–ù–∞–ø–∏—Ç–∫–∏</button>
      <button onclick="setCategory('–µ–¥–∞')">–ï–¥–∞</button>
      <button onclick="setCategory('—à–æ–∫–æ–ª–∞–¥–∫–∏')">–®–æ–∫–æ–ª–∞–¥–∫–∏</button>
    </div>
    <div id="productList"></div>
    <div class="cart" id="cartList"></div>
    <button onclick="sendOrder()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>

<script>
const users = {"Zhanik": "1234", "Dias": "1234", "Sanzhar": "1234", "Bekzat": "1234", "Elaman": "1234", "Kaisar": "1234", "Sultan": "1234"};
const products = [{"name": "Arzu 1l", "price": 500}, {"name": "BUZZ", "price": 650}, {"name": "COLA 1L", "price": 900}, {"name": "Coca-cola 0.5", "price": 550}, {"name": "FANTA", "price": 550}, {"name": "FANTA 1L", "price": 900}, {"name": "FUSE TEA 1L", "price": 900}, {"name": "Fuse tea 0.5", "price": 550}, {"name": "GS –ª–∏–º–æ–Ω–∞–¥ + —Ç–∞—Ä—Ö—É–Ω", "price": 650}, {"name": "KINDER/M&M/KITKAT", "price": 700}, {"name": "Piko 0.5", "price": 650}, {"name": "Qazaq-Food –ö–∞–∑—ã", "price": 0}, {"name": "Qazaq-Food –ö–æ–ª–±–∞—Å–∞", "price": 0}, {"name": "SPRITE 1L", "price": 900}, {"name": "Vitamin C", "price": 400}, {"name": "arzu 0.5", "price": 300}, {"name": "Bonaqua 1l", "price": 500}, {"name": "Cola Zero 0.450", "price": 550}, {"name": "Dizzy", "price": 550}, {"name": "Gorilla", "price": 750}, {"name": "pepsi", "price": 550}, {"name": "Redbull", "price": 1000}, {"name": "sprite 05", "price": 550}, {"name": "Albeni", "price": 500}, {"name": "–ë—É—Ä–≥–µ—Ä –ö–∞–º–¥–∏ Black, –•–æ—Ç-–î–æ–≥", "price": 1500}, {"name": "–ë—É—Ä–≥–µ—Ä –®–æ–∫—É–ø–∞–Ω, –°—ç–Ω–¥–≤–∏—á", "price": 1300}, {"name": "–ë—É—Ä–≥–µ—Ä –ë–ê–û, Puff", "price": 1400}, {"name": "–ì—Ä–∞–Ω–∞—Ç –ü–õ–ê–°–¢", "price": 400}, {"name": "–ï–î–ê Only Staff", "price": 900}, {"name": "–ï–ï –ë–ê–ù–ê–ù", "price": 650}, {"name": "–ö–ª–∞–±-–°—ç–Ω–¥–≤–∏—á", "price": 1400}, {"name": "–ú–æ—Ö–∏—Ç–æ", "price": 550}, {"name": "–ü–∞–Ω–∏–Ω–∏", "price": 1500}, {"name": "–ü–∏—Ü—Ü–∞ TOYASYN", "price": 1200}, {"name": "–°–Ω–∏–∫–µ—Ä—Å/–¢–≤–∏–∫—Å", "price": 600}, {"name": "–§—Ä–µ–Ω—á-–¥–æ–≥ —Ä–∏–∑—ã–∫", "price": 1000}, {"name": "–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI", "price": 650}];
const categories = {"–Ω–∞–ø–∏—Ç–∫–∏": ["Arzu 1l", "BUZZ", "COLA 1L", "Coca-cola 0.5", "FANTA", "FANTA 1L", "FUSE TEA 1L", "Fuse tea 0.5", "GS –ª–∏–º–æ–Ω–∞–¥ + —Ç–∞—Ä—Ö—É–Ω", "Piko 0.5", "SPRITE 1L", "Vitamin C", "arzu 0.5", "Bonaqua 1l", "Cola Zero 0.450", "Dizzy", "Gorilla", "pepsi", "Redbull", "sprite 05", "–ì—Ä–∞–Ω–∞—Ç –ü–õ–ê–°–¢", "–ï–ï –ë–ê–ù–ê–ù", "–ú–æ—Ö–∏—Ç–æ"], "–µ–¥–∞": ["Qazaq-Food –ö–∞–∑—ã", "Qazaq-Food –ö–æ–ª–±–∞—Å–∞", "–ë—É—Ä–≥–µ—Ä –ö–∞–º–¥–∏ Black, –•–æ—Ç-–î–æ–≥", "–ë—É—Ä–≥–µ—Ä –®–æ–∫—É–ø–∞–Ω, –°—ç–Ω–¥–≤–∏—á", "–ë—É—Ä–≥–µ—Ä –ë–ê–û, Puff", "–ï–î–ê Only Staff", "–ö–ª–∞–±-–°—ç–Ω–¥–≤–∏—á", "–ü–∞–Ω–∏–Ω–∏", "–ü–∏—Ü—Ü–∞ TOYASYN", "–§—Ä–µ–Ω—á-–¥–æ–≥ —Ä–∏–∑—ã–∫", "–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI"], "—à–æ–∫–æ–ª–∞–¥–∫–∏": ["KINDER/M&M/KITKAT", "Albeni", "–°–Ω–∏–∫–µ—Ä—Å/–¢–≤–∏–∫—Å"]};

let user = null;
let selectedCategory = '–≤—Å–µ';
let cart = {};

function auth() {
  const name = document.getElementById("login").value;
  const pass = document.getElementById("pass").value;
  if (users[name] === pass) {
    user = name;
    document.getElementById("auth").classList.add("hidden");
    document.getElementById("app").classList.remove("hidden");
    renderProducts();
  } else {
    alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å");
  }
}

function setCategory(cat) {
  selectedCategory = cat;
  renderProducts();
}

function renderProducts() {
  const list = document.getElementById("productList");
  list.innerHTML = "";
  const filter = products.filter(p => selectedCategory === '–≤—Å–µ' || (categories[selectedCategory] || []).includes(p.name));
  filter.forEach(p => {
    const el = document.createElement("div");
    el.className = "product";
    el.innerHTML = `
      <div><b>${p.name}</b> ‚Äî ${p.price} ‚Ç∏</div>
      <div class='qty-btns'>
        <button onclick="updateQty('–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI', -1)">‚ûñ</button>
        <span id="qty-–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI">${cart[p.name]?.qty || 0}</span>
        <button onclick="updateQty('–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI', 1)">‚ûï</button>
      </div>
    `;
    list.appendChild(el);
  });
  updateCart();
}

function updateQty(name, delta) {
  if (!cart[name]) cart[name] = { qty: 0, price: products.find(p => p.name === name).price };
  cart[name].qty += delta;
  if (cart[name].qty <= 0) delete cart[name];
  document.getElementById("qty-" + name).textContent = cart[name]?.qty || 0;
  updateCart();
}

function updateCart() {
  const out = document.getElementById("cartList");
  out.innerHTML = "<h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>";
  let total = 0;
  for (let k in cart) {
    const i = cart[k];
    out.innerHTML += `<div>${k} x${i.qty} ‚Äî ${i.qty * i.price} ‚Ç∏</div>`;
    total += i.qty * i.price;
  }
  out.innerHTML += `<div><b>–ò—Ç–æ–≥–æ: ${total} ‚Ç∏</b></div>`;
}

function sendOrder() {
  if (!user || Object.keys(cart).length === 0) return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
  const payload = {
    user,
    items: cart,
    date: new Date().toLocaleString('ru-RU'),
    id: Date.now()
  };
  fetch("https://bardate-6da25-default-rtdb.europe-west1.firebasedatabase.app/requests.json", {
    method: "POST",
    body: JSON.stringify(payload)
  }).then(() => {
    cart = {};
    updateCart();
    alert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω");
  }).catch(() => {
    alert("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞");
  });
}
</script>
</body>
</html>