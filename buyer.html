<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ë–∞—Ä | –ó–∞–∫–∞–∑</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <style>
    body { font-family: sans-serif; background: black; color: white; margin: 0; padding: 10px; }
    input, button { padding: 8px; margin: 4px 0; width: 100%; }
    .hidden { display: none; }
    .tabs { display: flex; flex-wrap: wrap; justify-content: center; gap: 6px; margin-bottom: 10px; }
    .tabs button { padding: 5px 10px; border: none; border-radius: 6px; background: white; color: black; cursor: pointer; }
    .products { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
    .product { background: #111; padding: 10px; border-radius: 10px; width: 120px; text-align: center; }
    .cart { background: #222; padding: 10px; margin-top: 10px; border-radius: 10px; }
  </style>
</head>
<body>
  <div id="loginSection">
    <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
    <input id="username" placeholder="–ò–º—è">
    <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="login()">–í–æ–π—Ç–∏</button>
  </div>

  <div id="mainSection" class="hidden">
    <h1>üçπ –ú–µ–Ω—é</h1>
    <div class="tabs">
      <button onclick="setCategory('–≤—Å–µ')">–í—Å–µ</button>
      <button onclick="setCategory('–Ω–∞–ø–∏—Ç–∫–∏')">–ù–∞–ø–∏—Ç–∫–∏</button>
      <button onclick="setCategory('–µ–¥–∞')">–ï–¥–∞</button>
      <button onclick="setCategory('—à–æ–∫–æ–ª–∞–¥–∫–∏')">–®–æ–∫–æ–ª–∞–¥–∫–∏</button>
    </div>
    <div class="products" id="productList"></div>
    <div class="cart" id="cartList"></div>
    <button onclick="submitOrder()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </div>

<script>
const allProducts = [{"name": "Arzu 1l", "price": 500}, {"name": "BUZZ", "price": 650}, {"name": "COLA 1L", "price": 900}, {"name": "Coca-cola 0.5", "price": 550}, {"name": "FANTA", "price": 550}, {"name": "FANTA 1L", "price": 900}, {"name": "FUSE TEA 1L", "price": 900}, {"name": "Fuse tea 0.5", "price": 550}, {"name": "GS –ª–∏–º–æ–Ω–∞–¥ + —Ç–∞—Ä—Ö—É–Ω", "price": 650}, {"name": "KINDER/M&M/KITKAT", "price": 700}, {"name": "Piko 0.5", "price": 650}, {"name": "Qazaq-Food –ö–∞–∑—ã", "price": 0}, {"name": "Qazaq-Food –ö–æ–ª–±–∞—Å–∞", "price": 0}, {"name": "SPRITE 1L", "price": 900}, {"name": "Vitamin C", "price": 400}, {"name": "arzu 0.5", "price": 300}, {"name": "Bonaqua 1l", "price": 500}, {"name": "Cola Zero 0.450", "price": 550}, {"name": "Dizzy", "price": 550}, {"name": "Gorilla", "price": 750}, {"name": "pepsi", "price": 550}, {"name": "Redbull", "price": 1000}, {"name": "sprite 05", "price": 550}, {"name": "Albeni", "price": 500}, {"name": "–ë—É—Ä–≥–µ—Ä –ö–∞–º–¥–∏ Black, –•–æ—Ç-–î–æ–≥", "price": 1500}, {"name": "–ë—É—Ä–≥–µ—Ä –®–æ–∫—É–ø–∞–Ω, –°—ç–Ω–¥–≤–∏—á", "price": 1300}, {"name": "–ë—É—Ä–≥–µ—Ä –ë–ê–û, Puff", "price": 1400}, {"name": "–ì—Ä–∞–Ω–∞—Ç –ü–õ–ê–°–¢", "price": 400}, {"name": "–ï–î–ê Only Staff", "price": 900}, {"name": "–ï–ï –ë–ê–ù–ê–ù", "price": 650}, {"name": "–ö–ª–∞–±-–°—ç–Ω–¥–≤–∏—á", "price": 1400}, {"name": "–ú–æ—Ö–∏—Ç–æ", "price": 550}, {"name": "–ü–∞–Ω–∏–Ω–∏", "price": 1500}, {"name": "–ü–∏—Ü—Ü–∞ TOYASYN", "price": 1200}, {"name": "–°–Ω–∏–∫–µ—Ä—Å/–¢–≤–∏–∫—Å", "price": 600}, {"name": "–§—Ä–µ–Ω—á-–¥–æ–≥ —Ä–∏–∑—ã–∫", "price": 1000}, {"name": "–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI", "price": 650}];
const categoryMap = {"–Ω–∞–ø–∏—Ç–∫–∏": ["Arzu 1l", "BUZZ", "COLA 1L", "Coca-cola 0.5", "FANTA", "FANTA 1L", "FUSE TEA 1L", "Fuse tea 0.5", "GS –ª–∏–º–æ–Ω–∞–¥ + —Ç–∞—Ä—Ö—É–Ω", "Piko 0.5", "SPRITE 1L", "Vitamin C", "arzu 0.5", "Bonaqua 1l", "Cola Zero 0.450", "Dizzy", "Gorilla", "pepsi", "Redbull", "sprite 05", "–ì—Ä–∞–Ω–∞—Ç –ü–õ–ê–°–¢", "–ï–ï –ë–ê–ù–ê–ù", "–ú–æ—Ö–∏—Ç–æ"], "–µ–¥–∞": ["Qazaq-Food –ö–∞–∑—ã", "Qazaq-Food –ö–æ–ª–±–∞—Å–∞", "–ë—É—Ä–≥–µ—Ä –ö–∞–º–¥–∏ Black, –•–æ—Ç-–î–æ–≥", "–ë—É—Ä–≥–µ—Ä –®–æ–∫—É–ø–∞–Ω, –°—ç–Ω–¥–≤–∏—á", "–ë—É—Ä–≥–µ—Ä –ë–ê–û, Puff", "–ï–î–ê Only Staff", "–ö–ª–∞–±-–°—ç–Ω–¥–≤–∏—á", "–ü–∞–Ω–∏–Ω–∏", "–ü–∏—Ü—Ü–∞ TOYASYN", "–§—Ä–µ–Ω—á-–¥–æ–≥ —Ä–∏–∑—ã–∫", "–°—ç–Ω–¥–≤–∏—á/–ü–∞–Ω–∏–Ω–∏ TIMAKHOVSKI"], "—à–æ–∫–æ–ª–∞–¥–∫–∏": ["KINDER/M&M/KITKAT", "Albeni", "–°–Ω–∏–∫–µ—Ä—Å/–¢–≤–∏–∫—Å"]};
let selectedCategory = '–≤—Å–µ';
let cart = {};
let currentUser = null;

const users = {
  "Zhanik": "1234", "Dias": "1234", "Sanzhar": "1234",
  "Bekzat": "1234", "Elaman": "1234", "Kaisar": "1234", "Sultan": "1234"
};

function login() {
  const user = document.getElementById("username").value;
  const pass = document.getElementById("password").value;
  if (users[user] === pass) {
    currentUser = user;
    document.getElementById("loginSection").classList.add("hidden");
    document.getElementById("mainSection").classList.remove("hidden");
    setCategory("–≤—Å–µ");
  } else {
    alert("–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");
  }
}

function setCategory(cat) {
  selectedCategory = cat;
  const filtered = allProducts.filter(p =>
    selectedCategory === '–≤—Å–µ' || (categoryMap[selectedCategory] || []).includes(p.name)
  );
  renderProducts(filtered);
}

function renderProducts(list) {
  const container = document.getElementById("productList");
  container.innerHTML = "";
  list.forEach(p => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <div><b>${p.name}</b></div>
      <div>${p.price} ‚Ç∏</div>
      <button onclick="addToCart('${p.name}', ${p.price})">–î–æ–±–∞–≤–∏—Ç—å</button>
    `;
    container.appendChild(div);
  });
}

function addToCart(name, price) {
  if (!cart[name]) cart[name] = { qty: 0, price: price };
  cart[name].qty++;
  updateCart();
}

function updateCart() {
  const c = document.getElementById("cartList");
  c.innerHTML = "<h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>";
  let total = 0;
  for (const name in cart) {
    const item = cart[name];
    total += item.qty * item.price;
    c.innerHTML += `<div>${name} x${item.qty} ‚Äî ${item.qty * item.price} ‚Ç∏</div>`;
  }
  c.innerHTML += `<div><b>–ò—Ç–æ–≥–æ: ${total} ‚Ç∏</b></div>`;
}

function submitOrder() {
  if (!currentUser || Object.keys(cart).length === 0) return alert("–ü—É—Å—Ç–æ");

  const now = new Date().toLocaleString('ru-RU');
  const id = Date.now();
  const data = { id, user: currentUser, items: cart, date: now };

  fetch("https://bardate-6da25-default-rtdb.europe-west1.firebasedatabase.app/requests.json", {
    method: "POST",
    body: JSON.stringify(data)
  }).then(() => {
    cart = {};
    updateCart();
    alert("üì§ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω");
  });
}
</script>
</body>
</html>